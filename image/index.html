<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√¨nh duy·ªát ·∫£nh tr√™n GitHub Pages</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
        ul { list-style: none; padding: 0; }
        li { padding: 8px; cursor: pointer; border-bottom: 1px solid #ddd; }
        li:hover { background: #f0f0f0; }
        .back { color: blue; font-weight: bold; }
        img { max-width: 100px; height: auto; display: block; margin-top: 5px; }
    </style>
</head>
<body>
    <h2>Danh s√°ch ·∫£nh</h2>
    <ul id="file-list"></ul>

    <script>
        const username = "tnhanx"; // GitHub username c·ªßa b·∫°n
        const repo = "tnhanx.github.io"; // Repo c·ªßa b·∫°n
        const customDomain = "https://tnhan.dev"; // T√™n mi·ªÅn t√πy ch·ªânh c·ªßa b·∫°n
        let currentPath = "image"; // B·∫Øt ƒë·∫ßu t·ª´ th∆∞ m·ª•c "image"

        // C√°c ƒëu√¥i file ·∫£nh h·ª£p l·ªá
        const imageExtensions = ["jpg", "jpeg", "png", "gif", "svg", "webp"];

        function loadFiles(path = "") {
            const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${path}`;

            fetch(apiUrl)
                .then(res => res.json())
                .then(data => {
                    const fileList = document.getElementById("file-list");
                    fileList.innerHTML = ""; // X√≥a danh s√°ch c≈©

                    if (path && path !== "image") {
                        fileList.innerHTML += `<li class="back" onclick="goBack()">‚¨Ö Quay l·∫°i</li>`;
                    }

                    data.forEach(file => {
                        const fileExtension = file.name.split('.').pop().toLowerCase();

                        if (file.type === "dir") {
                            // N·∫øu l√† th∆∞ m·ª•c, cho ph√©p v√†o th∆∞ m·ª•c
                            const li = document.createElement("li");
                            li.textContent = `üìÅ ${file.name}`;
                            li.onclick = () => {
                                currentPath = file.path;
                                loadFiles(currentPath);
                            };
                            fileList.appendChild(li);
                        } else if (imageExtensions.includes(fileExtension)) {
                            // N·∫øu l√† file ·∫£nh, hi·ªÉn th·ªã h√¨nh ·∫£nh
                            const li = document.createElement("li");
                            li.innerHTML = `<span>üñº ${file.name}</span><br><img src="${customDomain}/${file.path}" alt="${file.name}">`;
                            li.onclick = () => {
                                window.open(`${customDomain}/${file.path}`, "_blank");
                            };
                            fileList.appendChild(li);
                        }
                    });
                })
                .catch(err => console.error("L·ªói t·∫£i file:", err));
        }

        function goBack() {
            currentPath = currentPath.split("/").slice(0, -1).join("/");
            loadFiles(currentPath);
        }

        loadFiles(currentPath);
    </script>
</body>
</html>
